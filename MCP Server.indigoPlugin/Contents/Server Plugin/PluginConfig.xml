<?xml version="1.0"?>
<PluginConfig>
    <!-- OpenAI Configuration -->
    <Field id="openai_api_key" type="textfield" defaultValue="" secure="true"
           tooltip="Required for semantic search capabilities">
        <Label>OpenAI API Key:</Label>
    </Field>

    <Field id="api_key_help" type="label" fontSize="small" alignWithControl="false" alignText="left">
        <Label>Enter your OpenAI API key to enable semantic search. Get your API key from
            https://platform.openai.com/api-keys
        </Label>
    </Field>

    <Field id="separator1" type="separator"/>

    <!-- Server Configuration -->
    <Field id="server_port" type="textfield" defaultValue="8080">
        <Label>Server Port:</Label>
        <Description>HTTP port for the FastMCP server (1024-65535)</Description>
    </Field>

    <Field id="separator2" type="separator"/>

    <!-- Model Configuration -->
    <Field id="large_model" type="menu" defaultValue="gpt-4o">
        <Label>Large Model:</Label>
        <List>
            <Option value="gpt-4o">gpt-4.1</Option>
            <Option value="o3">o3</Option>
        </List>
    </Field>

    <Field id="small_model" type="menu" defaultValue="gpt-4o-mini">
        <Label>Small Model:</Label>
        <List>
            <Option value="o4-mini">o4-mini</Option>
        </List>
    </Field>

    <Field id="separator3" type="separator"/>

    <!-- LangSmith Configuration -->
    <Field type="checkbox" id="enable_langsmith" defaultValue="false">
        <Label>Enable LangSmith Tracing:</Label>
    </Field>
    <Field enabledBindingId="enable_langsmith" enabledBindingNegate="false" type="textfield" id="langsmith_endpoint"
           defaultValue="https://api.smith.langchain.com">
        <Label>LangSmith Endpoint URL:</Label>
    </Field>
    <Field enabledBindingId="enable_langsmith" enabledBindingNegate="false" type="textfield" id="langsmith_api_key"
           defaultValue="">
        <Label>LangSmith API Key:</Label>
    </Field>
    <Field enabledBindingId="enable_langsmith" enabledBindingNegate="false" type="textfield" id="langsmith_project"
           defaultValue="">
        <Label>LangSmith Project Name:</Label>
    </Field>

    <Field id="separator4" type="separator"/>

    <!-- InfluxDB Configuration -->
    <Field type="checkbox" id="enable_influxdb" defaultValue="false">
        <Label>Enable InfluxDB Historical Data:</Label>
        <Description>Enable access to historical device data stored in InfluxDB</Description>
    </Field>

    <Field enabledBindingId="enable_influxdb" enabledBindingNegate="false" type="textfield" id="influx_url"
           defaultValue="http://localhost">
        <Label>InfluxDB URL:</Label>
        <Description>InfluxDB server URL (e.g., http://localhost or https://influxdb.example.com)</Description>
    </Field>

    <Field enabledBindingId="enable_influxdb" enabledBindingNegate="false" type="textfield" id="influx_port"
           defaultValue="8086">
        <Label>InfluxDB Port:</Label>
        <Description>InfluxDB server port (default: 8086)</Description>
    </Field>

    <Field enabledBindingId="enable_influxdb" enabledBindingNegate="false" type="textfield" id="influx_login"
           defaultValue="">
        <Label>InfluxDB Username:</Label>
        <Description>Username for InfluxDB authentication</Description>
    </Field>

    <Field enabledBindingId="enable_influxdb" enabledBindingNegate="false" type="textfield" id="influx_password"
           defaultValue="" secure="true">
        <Label>InfluxDB Password:</Label>
        <Description>Password for InfluxDB authentication</Description>
    </Field>

    <Field enabledBindingId="enable_influxdb" enabledBindingNegate="false" type="textfield" id="influx_database"
           defaultValue="indigo">
        <Label>InfluxDB Database Name:</Label>
        <Description>Name of the database containing historical data (default: indigo)</Description>
    </Field>

    <Field id="separator5a" type="separator"/>

    <!-- Debug Settings -->
    <Field id="showDebugInfo" type="checkbox" defaultValue="false">
        <Label>Enable debug logging:</Label>
        <Description>Shows detailed debug information in the Event Log</Description>
    </Field>

    <Field id="log_level" type="menu" defaultValue="20">
        <Label>Event Logging Level:</Label>
        <List>
            <Option value="5">Extra Debugging Messages</Option>
            <Option value="10">Debugging Messages</Option>
            <Option value="20">Informational Messages</Option>
            <Option value="30">Warning Messages</Option>
            <Option value="40">Error Messages</Option>
            <Option value="50">Critical Errors Only</Option>
        </List>
    </Field>

    <Field id="separator5" type="separator"/>

    <!-- Server Access Configuration -->
    <Field id="access_mode" type="menu" defaultValue="local_only">
        <Label>Server Access Mode:</Label>
        <List>
            <Option value="local_only">Local Only (127.0.0.1)</Option>
            <Option value="remote_access">Remote Access (HTTP only)</Option>
        </List>
    </Field>

    <Field id="separator6" type="separator"/>

    <!-- Security Configuration -->
    <Field id="bearer_token" type="textfield" defaultValue="" readonly="true">
        <Label>Bearer Token (Auto-generated):</Label>
        <Description>Authentication token for secure access</Description>
    </Field>

    <Field id="regenerate_token_button" type="button">
        <Label>Regenerate Bearer Token</Label>
        <Title>Generate New Token</Title>
        <CallbackMethod>regenerate_bearer_token_button</CallbackMethod>
    </Field>
</PluginConfig>